<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mi Tienda ‚Äî Venta de productos</title>
  <meta name="description" content="Tienda online simple con carrito, b√∫squeda, filtros y checkout por WhatsApp o email." />
  <meta name="color-scheme" content="light dark" />
  <style>
    :root {
      --bg: #0b1220; --panel:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
      --brand:#22d3ee; --brand2:#6366f1; --ok:#22c55e; --err:#ef4444;
      --radius:16px; --shadow: 0 10px 25px rgba(0,0,0,.35)
    }
    @media (prefers-color-scheme: light){:root{--bg:#ffffff;--panel:#f8fafc;--text:#0f172a;--muted:#475569;--shadow:0 10px 25px rgba(0,0,0,.08)}}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background:
      radial-gradient(900px 600px at 10% -20%, rgba(34,211,238,.12), transparent),
      radial-gradient(700px 540px at 90% -10%, rgba(99,102,241,.12), transparent), var(--bg); color:var(--text)}
    a{color:inherit;text-decoration:none}
    .container{width:min(1200px,92%);margin-inline:auto}

    header{position:sticky;top:0;z-index:40;backdrop-filter:saturate(180%) blur(10px);background:color-mix(in oklab, var(--bg) 70%, transparent);border-bottom:1px solid color-mix(in oklab, var(--text) 12%, transparent)}
    .nav{display:flex;gap:1rem;align-items:center;justify-content:space-between;padding:.8rem 0}
    .brand{display:flex;gap:.6rem;align-items:center;font-weight:800}
    .logo{width:28px;height:28px;border-radius:9px;background:linear-gradient(135deg,var(--brand),var(--brand2));box-shadow:var(--shadow)}
    .actions{display:flex;gap:.5rem;align-items:center}
    .btn{padding:.6rem .9rem;border-radius:12px;border:1px solid color-mix(in oklab, var(--text) 16%, transparent);background:color-mix(in oklab, var(--panel) 86%, transparent);box-shadow:var(--shadow)}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));border:none;color:#fff}

    main{padding:2rem 0}
    .toolbar{display:grid;grid-template-columns:1fr 1fr auto;gap:.6rem;align-items:center;margin:1rem 0}
    .input, .select{width:100%;padding:.7rem .8rem;border-radius:10px;border:1px solid color-mix(in oklab, var(--text) 16%, transparent);background:transparent;color:var(--text)}
    .grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .card{border:1px solid color-mix(in oklab, var(--text) 14%, transparent);background:color-mix(in oklab, var(--panel) 90%, transparent);border-radius:16px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .card img{aspect-ratio:4/3;object-fit:cover;width:100%}
    .card .p{padding:1rem}
    .price{font-weight:800;font-size:1.2rem}
    .muted{color:var(--muted)}

    /* Carrito */
    .cart-toggle{position:fixed;right:1rem;bottom:1rem;z-index:50}
    .cart-drawer{position:fixed;top:0;right:-420px;width:min(400px,92%);height:100dvh;background:var(--panel);border-left:1px solid color-mix(in oklab, var(--text) 16%, transparent);box-shadow:var(--shadow);padding:1rem;display:flex;flex-direction:column;gap:1rem;transition:right .25s ease;z-index:60}
    .cart-drawer.open{right:0}
    .cart-list{display:flex;flex-direction:column;gap:.75rem;overflow:auto}
    .cart-item{display:grid;grid-template-columns:64px 1fr auto;gap:.6rem;align-items:center;border:1px solid color-mix(in oklab, var(--text) 12%, transparent);border-radius:12px;padding:.5rem;background:color-mix(in oklab, var(--panel) 94%, transparent)}
    .qty{display:inline-flex;align-items:center;border:1px solid color-mix(in oklab, var(--text) 16%, transparent);border-radius:10px}
    .qty button{background:transparent;border:none;padding:.35rem .6rem;color:var(--text);cursor:pointer}
    .footer{margin-top:auto;border-top:1px solid color-mix(in oklab, var(--text) 12%, transparent);padding-top:1rem}
    .total{font-size:1.2rem;font-weight:800}

    footer{padding:2rem 0;color:var(--muted);border-top:1px solid color-mix(in oklab, var(--text) 12%, transparent)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="#"><span class="logo"></span><span>Mi Tienda</span></a>
      <div class="actions">
        <button class="btn" id="openCart" aria-expanded="false">üõí Carrito <span id="cartCount" class="muted">(0)</span></button>
      </div>
    </div>
  </header>

  <main class="container">
    <h1>Productos</h1>
    <div class="toolbar">
      <input id="search" class="input" placeholder="Buscar productos..." />
      <select id="category" class="select">
        <option value="">Todas las categor√≠as</option>
      </select>
      <button id="clearFilters" class="btn">Limpiar filtros</button>
    </div>

    <div id="products" class="grid" aria-live="polite"></div>
  </main>

  <!-- Bot√≥n flotante carrito -->
  <button id="floatCart" class="btn primary cart-toggle">üõí <span id="cartCount2">0</span></button>

  <!-- Caj√≥n del carrito -->
  <aside id="cart" class="cart-drawer" aria-label="Carrito de compras" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
      <strong>Tu carrito</strong>
      <button class="btn" id="closeCart">‚úï</button>
    </div>
    <div id="cartList" class="cart-list"></div>
    <div class="footer">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="total">Total: <span id="cartTotal">$0</span></div>
        <button class="btn" id="clearCart">Vaciar</button>
      </div>
      <div style="height:.6rem"></div>
      <div style="display:flex;gap:.5rem;flex-wrap:wrap">
        <a id="checkoutWhats" class="btn primary" href="#" target="_blank" rel="noopener">Finalizar por WhatsApp</a>
        <a id="checkoutEmail" class="btn" href="#">Finalizar por Email</a>
      </div>
    </div>
  </aside>

  <footer>
    <div class="container">
      <p>¬© <span id="year"></span> Mi Tienda ‚Äî Hecho con ‚ù§Ô∏è</p>
    </div>
  </footer>

<script>
  // ===== Configura tus productos aqu√≠ =====
  const PRODUCTS = [
    { id:'p1', name:'Camiseta b√°sica', price: 39000, category: 'Ropa', img:'https://dummyimage.com/600x400/2f2f2f/ffffff&text=Camiseta' },
    { id:'p2', name:'Gorra deportiva', price: 29000, category: 'Accesorios', img:'https://dummyimage.com/600x400/333/fff&text=Gorra' },
    { id:'p3', name:'Termo 500ml', price: 45000, category: 'Hogar', img:'https://dummyimage.com/600x400/555/fff&text=Termo' },
    { id:'p4', name:'Mug cer√°mica', price: 22000, category: 'Hogar', img:'https://dummyimage.com/600x400/444/fff&text=Mug' },
    { id:'p5', name:'Sudadera unisex', price: 99000, category: 'Ropa', img:'https://dummyimage.com/600x400/1e293b/fff&text=Sudadera' },
    { id:'p6', name:'Mochila urbana', price: 149000, category: 'Accesorios', img:'https://dummyimage.com/600x400/0f172a/fff&text=Mochila' },
  ];

  // ===== Utilidades =====
  const $ = (s, el=document) => el.querySelector(s);
  const $$ = (s, el=document) => [...el.querySelectorAll(s)];
  const currency = (n) => n.toLocaleString('es-CO', { style:'currency', currency:'COP', maximumFractionDigits:0 });
  const yearEl = $('#year'); yearEl.textContent = new Date().getFullYear();

  // ===== Estado =====
  const state = {
    search: '', category: '',
    cart: JSON.parse(localStorage.getItem('CART_V1')||'[]'),
  };
  const saveCart = ()=> localStorage.setItem('CART_V1', JSON.stringify(state.cart));

  // ===== Render de productos =====
  const productsEl = $('#products');
  const catSel = $('#category');
  function initCategories(){
    const cats = [...new Set(PRODUCTS.map(p=>p.category))];
    cats.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; catSel.appendChild(o); });
  }
  function filtered(){
    return PRODUCTS.filter(p=>{
      const okS = !state.search || p.name.toLowerCase().includes(state.search);
      const okC = !state.category || p.category===state.category;
      return okS && okC;
    });
  }
  function renderProducts(){
    const list = filtered();
    productsEl.innerHTML = list.map(p=>`
      <article class="card" data-id="${p.id}">
        <img src="${p.img}" alt="${p.name}" loading="lazy"/>
        <div class="p">
          <div style="display:flex;justify-content:space-between;align-items:center;gap:.5rem">
            <strong>${p.name}</strong>
            <span class="price">${currency(p.price)}</span>
          </div>
          <p class="muted">${p.category}</p>
          <button class="btn primary" data-add="${p.id}">A√±adir al carrito</button>
        </div>
      </article>
    `).join('');
  }

  // ===== Carrito =====
  const cartDrawer = $('#cart');
  const cartList = $('#cartList');
  const cartTotal = $('#cartTotal');
  const cartCount = $('#cartCount');
  const cartCount2 = $('#cartCount2');

  function addToCart(id){
    const prod = PRODUCTS.find(p=>p.id===id);
    const item = state.cart.find(i=>i.id===id);
    if(item) item.qty += 1; else state.cart.push({ id, qty:1 });
    saveCart(); renderCart();
  }
  function removeFromCart(id){
    state.cart = state.cart.filter(i=>i.id!==id);
    saveCart(); renderCart();
  }
  function inc(id, d=1){ const it=state.cart.find(i=>i.id===id); if(!it) return; it.qty=Math.max(1, it.qty+d); saveCart(); renderCart(); }
  function calc(){
    const items = state.cart.map(i=>({ ...PRODUCTS.find(p=>p.id===i.id), qty:i.qty }));
    const count = items.reduce((a,b)=>a+b.qty,0);
    const total = items.reduce((a,b)=>a+b.price*b.qty,0);
    return { items, count, total };
  }
  function renderCart(){
    const { items, count, total } = calc();
    cartList.innerHTML = items.map(it=>`
      <div class="cart-item">
        <img src="${it.img}" alt="${it.name}"/>
        <div>
          <div style="display:flex;justify-content:space-between;gap:.5rem"><strong>${it.name}</strong><span>${currency(it.price)}</span></div>
          <div class="qty" role="group" aria-label="Cantidad">
            <button aria-label="Disminuir" data-dec="${it.id}">‚àí</button>
            <span style="padding:.2rem .6rem">${it.qty}</span>
            <button aria-label="Aumentar" data-inc="${it.id}">+</button>
          </div>
        </div>
        <button class="btn" title="Quitar" data-del="${it.id}">üóëÔ∏è</button>
      </div>
    `).join('') || '<p class="muted">Tu carrito est√° vac√≠o.</p>';
    cartTotal.textContent = currency(total);
    cartCount.textContent = `(${count})`;
    cartCount2.textContent = count;
    updateCheckoutLinks(items, total);
  }

  function updateCheckoutLinks(items, total){
    const lines = items.map(i=>`‚Ä¢ ${i.name} x${i.qty} ‚Äî ${currency(i.price*i.qty)}`).join('%0A');
    const message = `Hola, quiero comprar:%0A${lines}%0A%0ATotal: ${currency(total)}`;
    // Cambia el n√∫mero abajo por tu WhatsApp (c√≥digo de pa√≠s sin +). Ej: Colombia 57xxxxxxxxxx
    const phone = '573000000000';
    $('#checkoutWhats').href = `https://wa.me/${phone}?text=${message}`;
    const subject = encodeURIComponent('Pedido desde mi tienda');
    $('#checkoutEmail').href = `mailto:ventas@mitienda.com?subject=${subject}&body=${message}`;
  }

  // ===== Eventos =====
  document.addEventListener('click', (e)=>{
    const add = e.target.closest('[data-add]');
    const del = e.target.closest('[data-del]');
    const incB = e.target.closest('[data-inc]');
    const decB = e.target.closest('[data-dec]');
    if(add){ addToCart(add.dataset.add); }
    if(del){ removeFromCart(del.dataset.del); }
    if(incB){ inc(incB.dataset.inc, +1); }
    if(decB){ inc(decB.dataset.dec, -1); }
  });

  $('#search').addEventListener('input', (e)=>{ state.search = e.target.value.trim().toLowerCase(); renderProducts(); });
  catSel.addEventListener('change', (e)=>{ state.category = e.target.value; renderProducts(); });
  $('#clearFilters').addEventListener('click', ()=>{ state.search=''; state.category=''; $('#search').value=''; catSel.value=''; renderProducts(); });

  const openCartBtn = $('#openCart'), floatCart = $('#floatCart'), closeCartBtn = $('#closeCart');
  function openCart(){ cartDrawer.classList.add('open'); cartDrawer.setAttribute('aria-hidden','false'); openCartBtn.setAttribute('aria-expanded','true'); }
  function closeCart(){ cartDrawer.classList.remove('open'); cartDrawer.setAttribute('aria-hidden','true'); openCartBtn.setAttribute('aria-expanded','false'); }
  openCartBtn.addEventListener('click', openCart); floatCart.addEventListener('click', openCart); closeCartBtn.addEventListener('click', closeCart);
  $('#clearCart').addEventListener('click', ()=>{ state.cart=[]; saveCart(); renderCart(); });

  // ===== Inicio =====
  initCategories();
  renderProducts();
  renderCart();
</script>
</body>
</html>
